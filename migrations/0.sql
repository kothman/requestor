CREATE TABLE Request (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, start_datetime TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, end_datetime TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, notes TEXT DEFAULT NULL, phone VARCHAR(255) NOT NULL, phone_alt VARCHAR(255) DEFAULT NULL, requestor_id INT NOT NULL, requestee_id INT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_F42AB603A7F43455 ON Request (requestor_id);
CREATE INDEX IDX_F42AB603208A43D2 ON Request (requestee_id);
CREATE TABLE "user" (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, email VARCHAR(180) NOT NULL, roles JSON NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_IDENTIFIER_EMAIL ON "user" (email);
ALTER TABLE Request ADD CONSTRAINT FK_F42AB603A7F43455 FOREIGN KEY (requestor_id) REFERENCES "user" (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Request ADD CONSTRAINT FK_F42AB603208A43D2 FOREIGN KEY (requestee_id) REFERENCES "user" (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
